# =============================================================================
# Local Password Vault - Backend Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# =============================================================================

# Server
NODE_ENV=production
PORT=3001

# Supabase (Database)
# Get from: Supabase Dashboard → Settings → API
# Use the service_role key (NOT anon key) for backend operations
SUPABASE_URL=https://YOUR-PROJECT-ID.supabase.co
SUPABASE_SERVICE_KEY=eyJhbGc...YOUR-SERVICE-ROLE-KEY

# =============================================================================
# LICENSE SIGNING — ECDSA P-256 PRIVATE KEY (Recommended)
# =============================================================================
# Generate a key pair: node -e "require('./services/licenseSigner').generateKeyPair()"
# The PRIVATE key stays here (backend only). NEVER share or commit it.
# The PUBLIC key goes in the frontend .env as VITE_LICENSE_PUBLIC_KEY.
LICENSE_SIGNING_PRIVATE_KEY=

# =============================================================================
# LICENSE SIGNING SECRET — LEGACY HMAC-SHA256 (Deprecated)
# =============================================================================
# Only used if LICENSE_SIGNING_PRIVATE_KEY is not set (backward compatibility).
# Migrate to ECDSA P-256 above — HMAC requires the secret in the frontend bundle.
LICENSE_SIGNING_SECRET=

# =============================================================================
# STRIPE (Required)
# =============================================================================
# Get from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_live_your_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_secret_here

# Stripe Price IDs (get from Stripe Dashboard → Products → Prices)
# Local Password Vault (LPV)
STRIPE_PRICE_PERSONAL=price_xxxxx
STRIPE_PRICE_FAMILY=price_xxxxx

# Local Legacy Vault (LLV)
STRIPE_PRICE_LLV_PERSONAL=price_xxxxx
STRIPE_PRICE_LLV_FAMILY=price_xxxxx

# =============================================================================
# BREVO EMAIL (Required)
# =============================================================================
# Get API key from: Brevo → Settings → SMTP & API → API Keys
# Create a new API key with "Send emails" permission
# RECOMMENDED: Use Transactional API (more reliable than SMTP)
BREVO_API_KEY=xkeysib-your-api-key-here

# Sender info
FROM_EMAIL=noreply@localpasswordvault.com
SUPPORT_EMAIL=support@localpasswordvault.com

# =============================================================================
# WEBSITE
# =============================================================================
WEBSITE_URL=https://localpasswordvault.com
LLV_WEBSITE_URL=https://locallegacyvault.com

# =============================================================================
# ADMIN API KEY (Required for Admin Dashboard)
# =============================================================================
# Generate a secure random string for admin API access
# Example: openssl rand -hex 32
# This key is required to access admin endpoints and dashboard
ADMIN_API_KEY=your-secure-admin-api-key-here

# =============================================================================
# SENTRY ERROR TRACKING (Optional but Recommended)
# =============================================================================
# Get DSN from: https://sentry.io/settings/YOUR-ORG/projects/YOUR-PROJECT/keys/
# Only used in production (NODE_ENV=production)
SENTRY_DSN=https://xxxxx@xxxxx.ingest.sentry.io/xxxxx